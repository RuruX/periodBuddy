<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sunnie AI 聊天</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'jf-openhuninn-2.1', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background: #f5f5f5;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      overflow: hidden;
    }

    #app {
      width: 100%;
      max-width: 375px;
      height: 812px;
      position: relative;
      background: white;
      border-radius: 20px;
      overflow: hidden;
    }

    /* 背景渐变效果 */
    .background {
      position: absolute;
      left: -459px;
      top: -289px;
      width: 834px;
      height: 1101px;
      pointer-events: none;
    }

    .bg-blur {
      position: absolute;
      backdrop-filter: blur(45.15px);
      background: rgba(255, 255, 255, 0.6);
      mix-blend-mode: luminosity;
      height: 812px;
      left: 459px;
      top: 289px;
      width: 375px;
    }

    /* 状态栏 */
    .status-bar {
      position: absolute;
      height: 44px;
      left: 0;
      right: 0;
      top: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 21px 0 21px;
      z-index: 100;
    }

    .time {
      font-size: 15px;
      font-weight: 600;
      color: black;
    }

    .status-icons {
      display: flex;
      gap: 4px;
      align-items: center;
    }

    /* 返回按钮 */
    .back-button {
      position: absolute;
      left: 12px;
      top: 56px;
      width: 24px;
      height: 24px;
      cursor: pointer;
      z-index: 100;
    }

    .back-button svg {
      width: 100%;
      height: 100%;
    }

    /* Sunnie头像 */
    .sunnie-avatar {
      position: absolute;
      left: 20px;
      top: 97px;
      width: 71.405px;
      height: 72px;
      z-index: 10;
    }

    .sunnie-avatar img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    /* 聊天容器 */
    .chat-container {
      position: absolute;
      left: 0;
      right: 0;
      top: 133px;
      bottom: 120px;
      overflow-y: auto;
      padding: 0 12px;
      scrollbar-width: none;
    }

    .chat-container::-webkit-scrollbar {
      display: none;
    }

    /* 欢迎卡片 */
    .welcome-card {
      background: rgba(255, 255, 255, 0.7);
      border-radius: 20px;
      box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.12);
      padding: 65px 12px 12px 12px;
      margin-bottom: 12px;
    }

    .welcome-text {
      font-size: 14px;
      color: #404040;
      line-height: 1.3;
      margin-bottom: 16px;
    }

    .suggestion-button {
      width: 100%;
      padding: 8px 10px;
      border-radius: 40px;
      background: linear-gradient(110.515deg, rgba(255, 224, 212, 0.5) 5.342%, rgba(255, 200, 184, 0.75) 73.125%, rgba(255, 156, 126, 1) 97.343%);
      border: none;
      font-size: 14px;
      color: #404040;
      line-height: 1.3;
      cursor: pointer;
      margin-bottom: 8px;
      font-family: inherit;
      text-align: center;
      transition: transform 0.2s;
    }

    .suggestion-button:hover {
      transform: scale(1.02);
    }

    .suggestion-button:last-child {
      margin-bottom: 0;
    }

    /* 消息气泡 */
    .message {
      margin-bottom: 12px;
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message.user {
      display: flex;
      justify-content: flex-end;
    }

    .message.ai {
      display: flex;
      justify-content: flex-start;
    }

    .message-bubble {
      max-width: 80%;
      padding: 12px 12px 17px 12px;
      border-radius: 20px;
      font-size: 14px;
      line-height: 1.3;
      box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.12);
    }

    .message.user .message-bubble {
      background: #ff986f;
      color: white;
      border-top-right-radius: 20px;
      border-bottom-right-radius: 20px;
      border-bottom-left-radius: 20px;
      border-top-left-radius: 20px;
    }

    .message.ai .message-bubble {
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      border-top-left-radius: 20px;
      border-bottom-right-radius: 20px;
      border-bottom-left-radius: 20px;
      border-top-right-radius: 20px;
    }

    .message.ai .message-content {
      margin-bottom: 14px;
    }

    .message.ai .message-source {
      font-size: 12px;
      color: #0267ff;
      text-align: right;
    }

    /* 底部渐变 */
    .bottom-gradient {
      position: absolute;
      left: -16px;
      bottom: 0;
      width: 415px;
      height: 173px;
      background: linear-gradient(180deg, rgba(255, 142, 128, 0) 0%, #ff8e80 50%, #ff9d7f 100%);
      filter: blur(9.75px);
      pointer-events: none;
    }

    /* 输入区域 */
    .input-container {
      position: absolute;
      left: 11px;
      bottom: 56px;
      width: 351px;
      background: white;
      border-radius: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 10px 6px 20px;
      z-index: 10;
    }

    .input-field {
      flex: 1;
      border: none;
      outline: none;
      font-size: 14px;
      color: #333;
      font-family: inherit;
      line-height: 1.3;
    }

    .input-field::placeholder {
      color: #ccc;
    }

    .send-button {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff9d7f 0%, #ff8e80 100%);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: transform 0.2s;
    }

    .send-button:hover {
      transform: scale(1.05);
    }

    .send-button:active {
      transform: scale(0.95);
    }

    .send-button svg {
      width: 20px;
      height: 20px;
    }

    /* 底部指示器 */
    .home-indicator {
      position: absolute;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 2px;
      background: black;
      border-radius: 100px;
      backdrop-filter: blur(15px);
    }

    /* 隐藏类 */
    .hidden {
      display: none !important;
    }

    /* 加载动画 */
    .typing-indicator {
      display: inline-flex;
      gap: 4px;
      padding: 12px;
    }

    .typing-indicator span {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #999;
      animation: typing 1.4s infinite;
    }

    .typing-indicator span:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-indicator span:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing {
      0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.7;
      }
      30% {
        transform: translateY(-10px);
        opacity: 1;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- 背景 -->
    <div class="background">
      <img src="https://www.figma.com/api/mcp/asset/855d2dfe-5d35-4cee-b4d1-ccec86e2c497" style="position: absolute; left: 575px; top: 624px; width: 518px; height: 517px; transform: scale(1.57);" alt="">
      <img src="https://www.figma.com/api/mcp/asset/c237fe03-7d89-48b3-9b96-83b3b778c0a6" style="position: absolute; left: 316px; top: 819px; width: 364px; height: 364px; transform: scale(1.39);" alt="">
      <img src="https://www.figma.com/api/mcp/asset/8fccd607-0a5c-456d-a162-76be1fad566a" style="position: absolute; left: 305px; top: 258px; width: 561px; height: 561px; transform: scale(1.61);" alt="">
      <img src="https://www.figma.com/api/mcp/asset/a5ebde41-8cb8-4a51-96ac-392a3bbcd882" style="position: absolute; left: 689px; top: 238px; width: 209px; height: 209px;" alt="">
      <img src="https://www.figma.com/api/mcp/asset/ec646527-50b4-441c-b905-e0e57963c109" style="position: absolute; left: 761px; top: 731px; width: 126px; height: 126px;" alt="">
      <div class="bg-blur"></div>
    </div>

    <!-- 状态栏 -->
    <div class="status-bar">
      <div class="time">9:41</div>
      <div class="status-icons">
        <!-- 信号、WiFi、电池图标可以添加 -->
      </div>
    </div>

    <!-- 返回按钮 -->
    <div class="back-button" onclick="goBack()">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M15 18L9 12L15 6" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>

    <!-- Sunnie头像 -->
    <div class="sunnie-avatar">
      <img src="https://www.figma.com/api/mcp/asset/9796364e-dc02-4a6d-87e4-de91da007226" alt="Sunnie">
    </div>

    <!-- 聊天容器 -->
    <div class="chat-container" id="chatContainer">
      <!-- 欢迎卡片 -->
      <div class="welcome-card" id="welcomeCard">
        <p class="welcome-text">你好，我是 Sunnie，你可以向我提问关于经期的困惑/基础知识。</p>
        <button class="suggestion-button" onclick="sendSuggestion('带我了解月经周期')">
          带我了解月经周期
        </button>
        <button class="suggestion-button" onclick="sendSuggestion('我这次的经期超过10天是怎么回事？')">
          我这次的经期超过10天是怎么回事？
        </button>
        <button class="suggestion-button" onclick="sendSuggestion('运动/工作/休息/亲密怎么安排更合适？')">
          运动/工作/休息/亲密怎么安排更合适？
        </button>
      </div>

      <!-- 消息将动态添加到这里 -->
    </div>

    <!-- 底部渐变 -->
    <div class="bottom-gradient"></div>

    <!-- 输入区域 -->
    <div class="input-container">
      <input 
        type="text" 
        class="input-field" 
        id="messageInput"
        placeholder="开启和Sunnie的对话吧~"
        onkeypress="handleKeyPress(event)"
      >
      <button class="send-button" onclick="sendMessage()">
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M12 5L12 19M12 5L19 12M12 5L5 12" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <!-- 底部指示器 -->
    <div class="home-indicator"></div>
  </div>

  <script>
    // AI回复数据库
    const aiResponses = {
      '我这次的经期超过10天是怎么回事？': `一般来说，单次月经持续 3–7 天较为常见。
超过 10 天，在医学上通常被视为「经期延长」，值得留意，但不等于一定有严重问题。

比较常见的问题可能有：

→激素波动或暂时失衡
例如最近压力明显增加；作息紊乱、熬夜；体重短期变化；剧烈运动或突然停止运动

→排卵异常 / 无排卵周期：
如果这一周期没有正常排卵，
体内雌激素持续作用，内膜脱落不完全，就可能表现为"一直没干净"。`,

      '带我了解月经周期': `月经周期并不只是“来没来月经”，
而是由雌激素和孕激素在一个月中有节律变化所组成的生理循环，
这些变化会自然影响能量、情绪和身体状态。

一个常见的月经周期，通常分为四个阶段：

→ 月经期  
激素处在低位，子宫内膜脱落形成经血，
身体更偏向恢复，容易感到疲惫，需要多休息。

→ 卵泡期  
雌激素逐渐上升，能量和思路慢慢回暖，
适合学习、规划和开始新事情。

→ 排卵期  
雌激素达到高点并触发排卵，
身体和大脑更容易进入状态，
有些人会更自信、更想表达和连接。

→ 黄体期  
孕激素占主导，身体转向维持与稳定，
对压力和疲劳可能更敏感，更需要规律和安全感。

这些变化不是意志力的问题，
而是身体在不同阶段有不同的“工作重点”。
了解周期，是为了用更温柔的方式对待自己。`,

      '运动/工作/休息/亲密怎么安排更合适？': `根据月经周期的不同阶段，您的身体状态会有所不同：

→月经期（1-5天）
建议：轻度运动如散步、瑜伽；充足休息；避免剧烈运动

→卵泡期（6-13天）
建议：这是体能最佳时期，可以进行较强度运动；工作效率高；适合安排重要任务

→排卵期（14-16天）
建议：能量充沛，适合社交活动；注意避孕措施

→黄体期（17-28天）
建议：逐渐减少运动强度；多休息；注意情绪管理`,

      'default': `感谢您的提问！我是 Sunnie，专注于经期健康知识。

如果您有关于月经周期、经期症状、生理健康等方面的问题，欢迎随时询问我。

我会基于医学知识为您提供专业的建议和解答。`
    };

    let messageHistory = [];
    let isWelcomeCardVisible = true;

    // 发送建议问题
    function sendSuggestion(text) {
      // 隐藏欢迎卡片
      if (isWelcomeCardVisible) {
        document.getElementById('welcomeCard').classList.add('hidden');
        isWelcomeCardVisible = false;
      }

      // 添加用户消息
      addMessage(text, 'user');

      // 显示输入中状态
      showTypingIndicator();

      // 模拟AI思考时间后回复
      setTimeout(() => {
        hideTypingIndicator();
        const response = aiResponses[text] || aiResponses['default'];
        addMessage(response, 'ai', 'NHS');
      }, 1500);
    }

    // 发送自定义消息
    function sendMessage() {
      const input = document.getElementById('messageInput');
      const text = input.value.trim();

      if (!text) return;

      // 隐藏欢迎卡片
      if (isWelcomeCardVisible) {
        document.getElementById('welcomeCard').classList.add('hidden');
        isWelcomeCardVisible = false;
      }

      // 添加用户消息
      addMessage(text, 'user');

      // 清空输入框
      input.value = '';

      // 显示输入中状态
      showTypingIndicator();

      // 模拟AI思考时间后回复
      setTimeout(() => {
        hideTypingIndicator();
        
        // 检查是否有匹配的预设回复
        let response = aiResponses['default'];
        for (let key in aiResponses) {
          if (text.includes(key) || key.includes(text)) {
            response = aiResponses[key];
            break;
          }
        }
        
        addMessage(response, 'ai', 'NHS');
      }, 1500);
    }

    // 添加消息到聊天容器
    function addMessage(text, type, source = null) {
      const container = document.getElementById('chatContainer');
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${type}`;

      const bubbleDiv = document.createElement('div');
      bubbleDiv.className = 'message-bubble';

      if (type === 'ai' && source) {
        const contentDiv = document.createElement('div');
        contentDiv.className = 'message-content';
        contentDiv.textContent = text;

        const sourceDiv = document.createElement('div');
        sourceDiv.className = 'message-source';
        sourceDiv.textContent = `来源：${source}`;

        bubbleDiv.appendChild(contentDiv);
        bubbleDiv.appendChild(sourceDiv);
      } else {
        bubbleDiv.textContent = text;
      }

      messageDiv.appendChild(bubbleDiv);
      container.appendChild(messageDiv);

      // 保存到历史记录
      messageHistory.push({ text, type, source });

      // 滚动到底部
      scrollToBottom();
    }

    // 显示输入中指示器
    function showTypingIndicator() {
      const container = document.getElementById('chatContainer');
      const typingDiv = document.createElement('div');
      typingDiv.className = 'message ai';
      typingDiv.id = 'typingIndicator';

      const bubbleDiv = document.createElement('div');
      bubbleDiv.className = 'message-bubble';

      const indicator = document.createElement('div');
      indicator.className = 'typing-indicator';
      indicator.innerHTML = '<span></span><span></span><span></span>';

      bubbleDiv.appendChild(indicator);
      typingDiv.appendChild(bubbleDiv);
      container.appendChild(typingDiv);

      scrollToBottom();
    }

    // 隐藏输入中指示器
    function hideTypingIndicator() {
      const indicator = document.getElementById('typingIndicator');
      if (indicator) {
        indicator.remove();
      }
    }

    // 滚动到底部
    function scrollToBottom() {
      const container = document.getElementById('chatContainer');
      setTimeout(() => {
        container.scrollTop = container.scrollHeight;
      }, 100);
    }

    // 处理回车键
    function handleKeyPress(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }

    // 返回按钮
    function goBack() {
      if (messageHistory.length > 0) {
        if (confirm('确定要离开对话吗？')) {
          window.history.back();
        }
      } else {
        window.history.back();
      }
    }

    // 更新时间
    function updateTime() {
      const now = new Date();
      const hours = now.getHours().toString().padStart(2, '0');
      const minutes = now.getMinutes().toString().padStart(2, '0');
      document.querySelector('.time').textContent = `${hours}:${minutes}`;
    }

    // 初始化
    updateTime();
    setInterval(updateTime, 60000); // 每分钟更新一次时间
  </script>
</body>
</html>
